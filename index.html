<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Void's Decree | PoE Randomizer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Alegreya+SC:ital,wght@0,400;0,700;1,400&family=Alegreya:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="stars-layer"></div>
    
    <div class="container">
        <header>
            <h1><a href="index.html" class="home-link">The Void's Decree</a></h1>
            <p class="subtitle">Reach into the void. See what stares back.</p>
            
            <div class="flavor-container">
                <p class="flavor-text">
                    Surrender your agency, Exile. Exchange the cards below to bind your soul to a randomized <span class="highlight-text">Ascendancy</span>, <span class="highlight-text">Main Skill</span>, with an optional <span class="highlight-text">Keystone</span> selection.
                </p>
            </div>
        </header>

        <section class="config-panel">
            <div class="config-row">
                <span class="config-label">League Modifier:</span>
                <div class="toggle-wrapper">
                    <input type="checkbox" id="phreciaToggle" class="toggle-checkbox">
                    <label for="phreciaToggle" class="toggle-label">
                        <div class="toggle-switch">
                            <div class="toggle-thumb"></div>
                        </div>
                        <span class="toggle-text">Legacy of Phrecia</span>
                    </label>
                </div>
            </div>

            <div class="config-row">
                <span class="config-label">Gem Pools:</span>
                <div class="checkbox-group">
                    <label class="void-checkbox">
                        <input type="checkbox" id="pool-std" checked>
                        <span class="cb-box"></span>
                        <span class="cb-label">Standard</span>
                    </label>
                    <label class="void-checkbox">
                        <input type="checkbox" id="pool-trans" checked>
                        <span class="cb-box"></span>
                        <span class="cb-label">Transfigured</span>
                    </label>
                    <label class="void-checkbox">
                        <input type="checkbox" id="pool-trarthan" checked>
                        <span class="cb-box"></span>
                        <span class="cb-label">Trarthan</span>
                    </label>
                </div>
            </div>

            <div class="config-row">
                <span class="config-label">Keystone Allocation:</span>
                <div class="radio-group">
                    <label>
                        <input type="radio" name="keystoneCount" value="0">
                        <span class="radio-gem"></span>
                        <span class="radio-label">None</span>
                    </label>
                    <label>
                        <input type="radio" name="keystoneCount" value="1" checked>
                        <span class="radio-gem"></span>
                        <span class="radio-label">1</span>
                    </label>
                    <label>
                        <input type="radio" name="keystoneCount" value="2">
                        <span class="radio-gem"></span>
                        <span class="radio-label">2</span>
                    </label>
                </div>
            </div>
        </section>

        <section class="exchange-zone">
            <div id="deck-container" class="deck-container" onclick="castFate()">
                <div class="div-card-stack"></div>
                <div class="div-card-stack"></div>
                <div class="div-card-main">
                    <img src="https://www.poewiki.net/wiki/Special:FilePath/The_Void_card_art.png" alt="The Void">
                    <div class="card-overlay">
                        <span class="click-instruction">EXCHANGE</span>
                    </div>
                </div>
                <div class="glow-effect"></div>
            </div>
        </section>

        <section class="fate-grid" id="resultGrid">
            
            <div class="fate-card delay-1" id="card-asc">
                <div class="card-header">
                    <span>Ascendancy</span>
                    <div class="lock-toggle" onclick="toggleFracture('card-asc')" title="Fracture Modifier (Lock)">
                        <svg class="lock-svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C9.24 2 7 4.24 7 7V10H6C4.9 10 4 10.9 4 12V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V12C20 10.9 19.1 10 18 10H17V7C17 4.24 14.76 2 12 2ZM12 4C13.66 4 15 5.34 15 7V10H9V7C9 5.34 10.34 4 12 4ZM12 17C10.9 17 10 16.1 10 15C10 13.9 10.9 13 12 13C13.1 13 14 13.9 14 15C14 16.1 13.1 17 12 17Z"/>
                        </svg>
                    </div>
                </div>
                <div class="card-inner">
                    <a id="link-asc" href="#" target="_blank" class="result-link">
                        <div class="icon-frame portrait-frame">
                            <img id="img-asc" class="main-icon portrait" src="" alt="Ascendancy Art">
                        </div>
                        <div class="fate-value" id="res-asc-name">?</div>
                        <div class="fate-sub" id="res-asc-class">Class</div>
                    </a>
                </div>
            </div>

            <div class="fate-card highlight delay-2" id="card-skill">
                <div class="card-header">
                    <span>Active Skill Gem</span>
                    <div class="lock-toggle" onclick="toggleFracture('card-skill')" title="Fracture Modifier (Lock)">
                        <svg class="lock-svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C9.24 2 7 4.24 7 7V10H6C4.9 10 4 10.9 4 12V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V12C20 10.9 19.1 10 18 10H17V7C17 4.24 14.76 2 12 2ZM12 4C13.66 4 15 5.34 15 7V10H9V7C9 5.34 10.34 4 12 4ZM12 17C10.9 17 10 16.1 10 15C10 13.9 10.9 13 12 13C13.1 13 14 13.9 14 15C14 16.1 13.1 17 12 17Z"/>
                        </svg>
                    </div>
                </div>
                <div class="card-inner">
                    <a id="link-skill" href="#" target="_blank" class="result-link">
                        <div class="icon-frame">
                            <img id="img-skill" class="main-icon" src="" alt="Skill Gem">
                        </div>
                        <div class="fate-value" id="res-skill-name">?</div>
                        <div class="fate-sub" id="res-skill-type">Gem Type</div>
                    </a>
                </div>
            </div>

            <div class="fate-card delay-3" id="card-keystones">
                <div class="card-header">
                    <span>Passive Keystones</span>
                    <div class="lock-toggle" onclick="toggleFracture('card-keystones')" title="Fracture Modifier (Lock)">
                        <svg class="lock-svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C9.24 2 7 4.24 7 7V10H6C4.9 10 4 10.9 4 12V20C4 21.1 4.9 22 6 22H18C19.1 22 20 21.1 20 20V12C20 10.9 19.1 10 18 10H17V7C17 4.24 14.76 2 12 2ZM12 4C13.66 4 15 5.34 15 7V10H9V7C9 5.34 10.34 4 12 4ZM12 17C10.9 17 10 16.1 10 15C10 13.9 10.9 13 12 13C13.1 13 14 13.9 14 15C14 16.1 13.1 17 12 17Z"/>
                        </svg>
                    </div>
                </div>
                <div class="card-inner">
                    <div id="keystone-results" class="keystone-container">
                        <a id="link-key1" href="#" target="_blank" class="keystone-row result-link">
                            <div class="keystone-frame">
                                <img id="img-key1" class="keystone-icon" src="" alt="Keystone">
                            </div>
                            <span id="res-key1-name" class="keystone-text">?</span>
                        </a>
                        <a id="link-key2" href="#" target="_blank" class="keystone-row result-link" style="display:none">
                            <div class="keystone-frame">
                                <img id="img-key2" class="keystone-icon" src="" alt="Keystone">
                            </div>
                            <span id="res-key2-name" class="keystone-text">?</span>
                        </a>
                        <div id="no-keystones" class="no-data-msg" style="display:none;">
                            No Keystones Allocated
                        </div>
                    </div>
                </div>
            </div>

        </section>
        
        <div class="action-bar-container">
            <button id="inspireBtn" class="ninja-btn hidden" onclick="openSearchConfig()">
                <img src="https://poe.ninja/shared-assets/ninja-logo.png" alt="Ninja" class="ninja-icon">
                <span>Seek Inspiration on poe.ninja</span>
            </button>

            <div class="btn-group-vertical hidden" id="controlGroup">
                <button id="resetBtn" class="reset-btn" onclick="rerollFate()">
                    Draw Another Set
                </button>
                <button id="shareBtn" class="share-btn" onclick="copyPermalink()" title="Copy current URL">
                    ðŸ”— Share Fate
                </button>
            </div>
        </div>

        <div id="history-section" class="history-section hidden">
            <div class="history-label">Previous Decrees:</div>
            <div id="history-list" class="history-tabs">
                </div>
        </div>

        <div id="search-modal" class="modal-overlay hidden">
            <div class="modal-content">
                <span class="close-modal" onclick="closeSearchConfig()">&times;</span>
                <h2 class="modal-title">Refine Query</h2>
                <p class="modal-subtitle">Select parameters to include in your poe.ninja search:</p>
                <div class="search-options">
                    <label class="search-option-row">
                        <input type="checkbox" id="chk-asc" checked>
                        <span class="checkmark"></span>
                        <span id="lbl-asc">Ascendancy</span>
                    </label>
                    <label class="search-option-row">
                        <input type="checkbox" id="chk-skill" checked>
                        <span class="checkmark"></span>
                        <span id="lbl-skill">Skill Gem</span>
                    </label>
                    <label class="search-option-row" id="row-keystone">
                        <input type="checkbox" id="chk-keystone" checked>
                        <span class="checkmark"></span>
                        <span id="lbl-keystone">Keystones</span>
                    </label>
                </div>
                <button class="modal-action-btn" onclick="executePoeNinjaSearch()">
                    Open Portal
                </button>
            </div>
        </div>

        <div id="toast" class="toast hidden">URL Copied to Clipboard</div>

    </div>

    <script src="script.js"></script>
    <script src="inspiration.js"></script>
</body>
</html>